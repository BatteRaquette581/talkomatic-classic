<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Themes - Talkomatic</title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Customize your Talkomatic experience with beautiful themes. Choose from curated themes or import your own custom designs."
    />
    <meta
      name="keywords"
      content="Talkomatic themes, chat room themes, customization, dark themes, UI themes"
    />

    <!-- External Resources -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Toastr for notifications -->
    <link rel="stylesheet" href="stylesheets/toastr.min.css?v=1.0.1" />
    <link rel="stylesheet" href="stylesheets/toastr.css?v=1.0.1" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />

    <style>
      /* Talkomatic Theme Variables - Matching lobby.css */
      :root {
        --primary: #ff9800;
        --background-color: #202020;
        --left-panel-background-color: #616161;
        --panel-content-background-color: #444444;
        --hover-background-color: #1b1b1b;
        --section-background-color: #fdf5e6;
        --form-background-color: white;
        --button-background-color: black;
        --hover-button-background-color: #f57c00;
        --input-background-color: white;
        --modal-background-color: rgba(0, 0, 0, 0.8);
        --card-background-color: black;
        --success-background-color: #4caf50;
        --error-background-color: #f44336;
        --warning-background-color: #ff9800;

        --text-color: white;
        --secondary-text-color: #cccccc;
        --muted-text-color: #888888;
        --section-text-color: black;
        --button-text-color: white;
        --primary-text-color: #ff9800;

        --border-color: white;
        --input-border-color: #444444;
        --focus-border-color: cyan;
        --card-border-color: #616161;
      }

      /* Font Declarations - Matching lobby */
      @font-face {
        font-family: "talkoSS";
        src: url("../fonts/Sansation_Light.ttf");
      }
      @font-face {
        font-family: "talkoSS";
        src: url("../fonts/Sansation_Bold.ttf");
        font-weight: bold;
      }

      /* Global Styles */
      body,
      html {
        margin: 0;
        padding: 0;
        min-height: 100%;
        font-family: talkoSS, Arial, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
      }

      /* Layout Container */
      .container {
        display: flex;
        min-height: 100vh;
      }

      /* Left Panel */
      .left-panel {
        width: 350px;
        background-color: var(--left-panel-background-color);
        color: var(--text-color);
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        overflow-y: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }

      .left-panel::-webkit-scrollbar {
        width: 0;
        height: 0;
        background: transparent;
      }

      /* Panel Header */
      .panel-header {
        text-align: center;
        padding: 20px 18px 8px;
      }

      .panel-header .talkomatic {
        font-family: talkoSS, Arial, sans-serif;
        font-weight: bold;
        font-size: 24px;
        color: var(--primary);
        margin-right: 5px;
      }

      .panel-header .page-title {
        font-family: talkoSS, Arial, sans-serif;
        font-weight: normal;
        font-size: 24px;
        color: var(--text-color);
      }

      /* Back Link */
      .back-link {
        display: block;
        padding: 18px;
        color: var(--primary);
        background-color: rgb(27, 27, 27);
        text-decoration: none;
        font-size: 16px;
        font-weight: bold;
        border-bottom: 1px solid #1a1a1a;
        transition: background-color 0.3s ease;
      }

      .back-link:hover {
        background-color: rgb(53, 53, 53);
      }

      .back-link i {
        margin-right: 8px;
      }

      /* Navigation Section */
      .nav-section {
        background-color: var(--section-background-color);
        padding: 18px;
        margin: 20px 0;
      }

      .nav-section h3 {
        color: var(--section-text-color);
        margin: 0 0 15px 0;
        font-weight: bold;
        font-size: 16px;
      }

      .nav-buttons {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .nav-button {
        padding: 12px 16px;
        background-color: var(--button-background-color);
        color: var(--button-text-color);
        border: 1px solid var(--primary);
        border-radius: 4px;
        cursor: pointer;
        font-family: talkoSS, Arial, sans-serif;
        font-size: 14px;
        transition: background-color 0.3s ease;
        text-align: left;
      }

      .nav-button:hover {
        background-color: var(--hover-button-background-color);
      }

      .nav-button.active {
        background-color: var(--primary);
        color: black;
      }

      .nav-button i {
        margin-right: 8px;
        width: 16px;
      }

      /* Import Section */
      .import-section {
        background-color: var(--section-background-color);
        padding: 18px;
        margin: 20px 0;
      }

      .import-section h3 {
        color: var(--section-text-color);
        margin: 0 0 15px 0;
        font-weight: bold;
        font-size: 16px;
      }

      .file-input-wrapper {
        position: relative;
        margin-bottom: 15px;
      }

      .file-input {
        position: absolute;
        opacity: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }

      .file-input-button {
        display: block;
        padding: 12px 16px;
        background-color: var(--input-background-color);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        color: var(--section-text-color);
        font-family: talkoSS, Arial, sans-serif;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.3s ease;
        font-size: 12px;
      }

      .file-input-button:hover {
        background-color: #f0f0f0;
      }

      .apply-button {
        width: 100%;
        padding: 12px 16px;
        background-color: var(--button-background-color);
        color: var(--button-text-color);
        border: 1px solid var(--primary);
        border-radius: 4px;
        cursor: pointer;
        font-family: talkoSS, Arial, sans-serif;
        font-size: 14px;
        transition: background-color 0.3s ease;
      }

      .apply-button:hover {
        background-color: var(--hover-button-background-color);
      }

      .apply-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Right Panel */
      .right-panel {
        flex-grow: 1;
        background-color: var(--background-color);
        padding: 30px 20px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        max-width: calc(100vw - 350px);
      }

      .right-panel h2 {
        font-family: talkoSS, Arial, sans-serif;
        font-weight: normal;
        font-size: 25px;
        color: var(--primary);
        margin-bottom: 30px;
      }

      /* Search Bar */
      .search-container {
        margin-bottom: 30px;
      }

      .search-input {
        width: 100%;
        padding: 12px;
        background-color: var(--input-background-color);
        border: 1px solid var(--input-border-color);
        border-radius: 4px;
        font-family: talkoSS, Arial, sans-serif;
        font-size: 16px;
        box-sizing: border-box;
        transition: border-color 0.3s ease;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--focus-border-color);
      }

      /* Theme Grid */
      .theme-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
        gap: 25px;
        margin-bottom: 20px;
      }

      /* Theme Card - Made Bigger */
      .theme-card {
        background-color: var(--card-background-color);
        border: 1px solid var(--card-border-color);
        border-radius: 8px;
        padding: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .theme-card:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
      }

      .theme-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        padding: 6px 10px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
      }

      .theme-badge.official {
        background-color: var(--primary);
        color: black;
      }

      .theme-badge.user-made {
        background-color: #7289da;
        color: white;
      }

      .theme-badge.uploaded {
        background-color: #4caf50;
        color: white;
      }

      .theme-thumbnail {
        width: 100%;
        aspect-ratio: 16 / 9;
        object-fit: cover;
        border-radius: 4px;
        margin-bottom: 18px;
        border: 1px solid var(--card-border-color);
      }

      .imported-thumbnail {
        width: 100%;
        aspect-ratio: 16 / 9;
        background-color: #000;
        border-radius: 4px;
        margin-bottom: 18px;
        border: 1px solid var(--card-border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-size: 24px;
        font-weight: bold;
      }

      .theme-name {
        font-size: 20px;
        font-weight: bold;
        color: var(--text-color);
        margin-bottom: 10px;
      }

      .theme-author {
        font-size: 16px;
        color: var(--muted-text-color);
      }

      .theme-author::before {
        content: "by ";
      }

      /* Import Theme Section - Compacted */
      .import-content {
        display: none;
      }

      .import-content.active {
        display: block;
      }

      .disclaimer {
        background-color: rgba(244, 67, 54, 0.1);
        border: 1px solid #f44336;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        color: #f44336;
        font-weight: bold;
        font-size: 14px;
      }

      .import-instructions {
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        line-height: 1.4;
        font-size: 14px;
      }

      .import-instructions a {
        color: var(--primary);
        text-decoration: none;
      }

      .import-instructions a:hover {
        text-decoration: underline;
      }

      .import-form {
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        padding: 20px;
      }

      .form-row {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
      }

      .form-row .file-input-wrapper,
      .form-row input {
        flex: 1;
      }

      .theme-name-input {
        padding: 12px;
        background-color: var(--input-background-color);
        border: 1px solid var(--input-border-color);
        border-radius: 4px;
        font-family: talkoSS, Arial, sans-serif;
        font-size: 14px;
        box-sizing: border-box;
      }

      .theme-name-input:focus {
        outline: none;
        border-color: var(--focus-border-color);
      }

      /* Custom Modal for Theme Naming */
      .custom-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--modal-background-color);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .custom-modal.show {
        display: flex;
      }

      .modal-content {
        background-color: var(--background-color);
        border: 1px solid var(--primary);
        border-radius: 8px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        color: var(--text-color);
      }

      .modal-title {
        color: var(--primary);
        margin-bottom: 20px;
        font-size: 20px;
      }

      .modal-input {
        width: 100%;
        padding: 12px;
        background-color: var(--input-background-color);
        border: 1px solid var(--input-border-color);
        border-radius: 4px;
        font-family: talkoSS, Arial, sans-serif;
        font-size: 16px;
        margin-bottom: 20px;
        box-sizing: border-box;
      }

      .modal-buttons {
        display: flex;
        gap: 15px;
        justify-content: flex-end;
      }

      .modal-button {
        padding: 12px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-family: talkoSS, Arial, sans-serif;
        font-size: 14px;
        border: 1px solid var(--primary);
        transition: background-color 0.3s ease;
      }

      .modal-button.primary {
        background-color: var(--primary);
        color: black;
      }

      .modal-button.secondary {
        background-color: var(--button-background-color);
        color: var(--button-text-color);
      }

      .modal-button:hover {
        background-color: var(--hover-button-background-color);
        color: var(--text-color);
      }

      /* Mobile Responsive Design - No Sidebar */
      @media (max-width: 992px) {
        .container {
          flex-direction: column;
        }

        .left-panel {
          width: 100%;
          min-height: auto;
          position: relative;
        }

        .right-panel {
          width: 100%;
          max-width: 95vw;
          padding: 20px 15px;
        }

        .theme-grid {
          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
          gap: 20px;
        }

        .nav-buttons {
          flex-direction: row;
        }

        .import-section {
          margin: 10px 0;
        }

        .form-row {
          flex-direction: column;
          gap: 10px;
        }
      }

      @media (max-width: 600px) {
        .theme-grid {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .right-panel {
          padding: 15px 10px;
        }

        .theme-card {
          padding: 20px;
        }

        .theme-thumbnail,
        .imported-thumbnail {
          height: 150px;
        }

        .theme-name {
          font-size: 18px;
        }

        .theme-author {
          font-size: 14px;
        }

        .panel-header .talkomatic,
        .panel-header .page-title {
          font-size: 20px;
        }

        .nav-buttons {
          flex-direction: column;
        }

        .modal-content {
          margin: 20px;
          padding: 20px;
        }

        .disclaimer,
        .import-instructions {
          font-size: 12px;
          padding: 12px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Left Panel -->
      <div class="left-panel">
        <!-- Back Link -->
        <a href="/" class="back-link">
          <i class="fas fa-arrow-left"></i>
          Back to Talkomatic
        </a>

        <!-- Panel Header -->
        <div class="panel-header">
          <span class="talkomatic">Talkomatic™</span>
          <span class="page-title">Themes</span>
        </div>

        <!-- Navigation Section -->
        <div class="nav-section">
          <h3>Browse Themes</h3>
          <div class="nav-buttons">
            <button class="nav-button active" id="curatedThemesButton">
              <i class="fas fa-star"></i>
              Curated Themes
            </button>
            <button class="nav-button" id="importThemeButton">
              <i class="fas fa-folder-open"></i>
              Import Theme
            </button>
          </div>
        </div>

        <!-- Import Section -->
        <div class="import-section">
          <h3>Quick Import</h3>
          <div class="file-input-wrapper">
            <input
              type="file"
              class="file-input"
              id="quickImportInput"
              accept=".css"
            />
            <label for="quickImportInput" class="file-input-button">
              <i class="fas fa-file-upload"></i>
              Choose CSS File
            </label>
          </div>
          <button class="apply-button" id="quickApplyButton" disabled>
            <i class="fas fa-palette"></i>
            Apply Theme
          </button>
        </div>
      </div>

      <!-- Right Panel -->
      <div class="right-panel">
        <!-- Curated Themes Content -->
        <div id="curatedContent" class="curated-content">
          <h2>Curated Themes</h2>

          <div class="search-container">
            <input
              type="text"
              class="search-input"
              id="searchTheme"
              placeholder="Search themes by name or author..."
            />
          </div>

          <div class="theme-grid" id="themeGrid">
            <div class="theme-card" data-file="">
              <div class="theme-badge official">
                <i class="fas fa-star"></i> Official
              </div>
              <img
                src="themes/vanilla.png"
                alt="Default Theme"
                class="theme-thumbnail"
              />
              <div class="theme-name">Default/Vanilla Talkomatic</div>
              <div class="theme-author">sjzoppi, talkomatic.co</div>
            </div>

            <div class="theme-card" data-file="mocha.css">
              <div class="theme-badge user-made">
                <i class="fas fa-users"></i> User-made
              </div>
              <img
                src="themes/mocha.png"
                alt="Catppuccin Mocha Theme"
                class="theme-thumbnail"
              />
              <div class="theme-name">Catppuccin Mocha</div>
              <div class="theme-author">BatteBaguette58</div>
            </div>
          </div>
        </div>

        <!-- Import Theme Content -->
        <div id="importContent" class="import-content">
          <h2>Import Custom Theme</h2>

          <div class="disclaimer">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>Security Warning:</strong> Only import themes from trusted
            sources. Malicious CSS files can potentially redirect links, hide
            important UI elements, or inject unwanted content. Always review the
            CSS code before importing.
          </div>
          <div class="import-instructions">
            <p>
              <strong>How to Create Custom Themes:</strong> Talkomatic themes
              are CSS files that customize the appearance using CSS custom
              properties (variables). All theme colors are defined in the
              <code>:root</code> section - modify variables like
              <code>--primary</code>, <code>--background-color</code>, and
              <code>--text-color</code> to transform the look.
            </p>
            <p>
              <strong>Getting Started:</strong> Download the template below to
              see all available variables. Use your browser's developer tools to
              inspect elements and identify which variables control specific
              interface parts. Test thoroughly for good contrast and
              readability.
            </p>
            <p>
              <a href="stylesheets/lobby.css" download>
                <i class="fas fa-download"></i>
                Download Template CSS File
              </a>
            </p>
          </div>

          <div class="import-form">
            <div class="form-row">
              <div class="file-input-wrapper">
                <input
                  type="file"
                  class="file-input"
                  id="importThemeInput"
                  accept=".css"
                />
                <label for="importThemeInput" class="file-input-button">
                  <i class="fas fa-folder-open"></i>
                  Select CSS File
                </label>
              </div>
              <input
                type="text"
                class="theme-name-input"
                id="themeNameInput"
                placeholder="Theme Name"
                maxlength="30"
              />
            </div>
            <button class="apply-button" id="importApplyButton" disabled>
              <i class="fas fa-save"></i>
              Save & Apply Theme
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Theme Naming Modal -->
    <div id="themeModal" class="custom-modal">
      <div class="modal-content">
        <h3 class="modal-title">Name Your Theme</h3>
        <input
          type="text"
          class="modal-input"
          id="modalThemeNameInput"
          placeholder="Enter theme name..."
          maxlength="30"
        />
        <div class="modal-buttons">
          <button class="modal-button secondary" id="modalCancelButton">
            Cancel
          </button>
          <button class="modal-button primary" id="modalSaveButton">
            Save Theme
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="js/jquery.min.js?v=1.1.2"></script>
    <script src="js/toastr.min.js?v=1.1.2"></script>
    <script src="js/themes.js?v=1.1.2"></script>
  </body>
</html>
