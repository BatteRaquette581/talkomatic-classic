<!DOCTYPE html>
<html lang="en">

<!-- Head Section: Metadata and External Resources -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Talkomatic Lobby - Join the World's First Real-Time Chat Room</title>
    
    <!-- Link to external stylesheet for lobby-specific styles -->
    <link rel="stylesheet" href="stylesheets/lobby.css?v=1.0.7">

    <!-- Toastr official CSS -->
    <link rel="stylesheet" href="stylesheets/toastr.min.css?v=1.0.1">
    <link rel="stylesheet" href="stylesheets/toastr.css?v=1.0.1">

    <link rel="icon" type="image/png" href="images/icons/favicon.png">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
</head>

<body>
    <!-- Button to toggle the left panel (menu) visibility -->
    <button class="toggle-button" id="toggleButton">Menu</button>

    <!-- Container that holds both the left (menu) and right (content) panels -->
    <div class="container">
        
        <!-- Left panel containing the menu options and forms -->
        <div class="left-panel" id="leftPanel">
            <button class="hide-menu-button" id="hideMenuButton">...Hide Menu</button>
            
            <div class="panel-header">
                <span class="talkomatic">Talkomatic™</span>
                <span class="lobby">Lobby</span>
            </div>

            <div class="external-links">
                <table class="retro-link-table">
                    <tr>
                        <td><a href="https://classic.talkomatic.co/sponsors.html" target="_blank" rel="noopener noreferrer"><span class="bullet"></span> Sponsors</a></td>
                        <td><a href="https://classic.talkomatic.co/contributors.html" target="_blank" rel="noopener noreferrer"><span class="bullet"></span> Contributors</a></td>
                    </tr>
                    <tr>
                        <td><a href="https://classic.talkomatic.co/about.html" target="_blank" rel="noopener noreferrer"><span class="bullet"></span> About</a></td>
                        <td><a href="https://discord.gg/N7tJznESrE" target="_blank" rel="noopener noreferrer"><span class="bullet"></span> Discord</a></td>
                    </tr>
                </table>
            </div>
            
            <!-- Section where users can provide a name to be known as in the chat -->
            <div class="known-as-section">
                <p>Be Known As...</p>
            </div>
            
            <!-- Form for signing in to the chat room -->
            <div id="logform">
                <form>
                    <input type="text" placeholder="Your Name" required maxlength="12" id="aprilFoolsNameInput">
                    <input type="text" placeholder="Location (optional)" maxlength="12" id="aprilFoolsLocationInput">
                    
                    <button type="submit" id="aprilFoolsSignInButton">Sign In 
                        <img src="images/icons/pencil.png" alt="Arrow" class="arrow-icon">
                    </button>
                </form>
            </div>
            
            <!-- Section for creating a chat room -->
            <div class="createRoom">
                <p>Create A Room...</p>
                <a href="#" class="learn-more">Learn More</a>
            </div>
            
            <!-- Form for specifying room details (room name, type, layout) -->
            <div id="lobbyForm">
                <input type="text" placeholder="Room Name" maxlength="20">
                
                <!-- Radio buttons for selecting the type of room -->
                <div class="radio-group">
                    <label>
                        <input type="radio" name="roomType" value="public">
                        <img src="images/icons/public.svg" alt="Public Room Icon" class="radio-icon">
                        <span>Public Room</span>
                    </label>
                    <label>
                        <input type="radio" name="roomType" value="semi-private">
                        <img src="images/icons/semi-private.svg" alt="Semi-Private Room Icon" class="radio-icon">
                        <span>Semi-Private Room</span>
                    </label>
                    <label>
                        <input type="radio" name="roomType" value="private">
                        <img src="images/icons/secret.svg" alt="Private Room Icon" class="radio-icon">
                        <span>Private Room</span>
                    </label>
                </div>

                <!-- Access code field for private/semi-private rooms -->
                <div id="accessCodeInput" style="display: none;">
                    <input type="text" placeholder="6-digit Access Code" maxlength="6" pattern="\d{6}">
                </div>

                <!-- Room layout selection (horizontal or vertical) -->
                <p class="roomLay">Room Layout</p>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="roomLayout" value="horizontal">
                        <img src="images/icons/horizontal.svg" alt="Horizontal Layout Icon" class="radio-icon">
                        <span>Horizontal</span>
                    </label>
                    <label>
                        <input type="radio" name="roomLayout" value="vertical">
                        <img src="images/icons/vertical.svg" alt="Vertical Layout Icon" class="radio-icon">
                        <span>Vertical</span>
                    </label>
                </div>

                <div class="button-container">
                    <button type="button" class="go-chat-button">Go Chat...</button>
                </div>
            </div>
        </div>

        <!-- Right panel where available rooms and sign-in messages are displayed -->
        <div class="right-panel">
            <h2>Join A Room ...</h2>
            
            <div id="signInMessage" style="display: block;">
                <p>Please sign in to see available chatrooms.</p>
            </div>
            
            <div class="roomList" style="display: none;">
                <div class="rooms" id="dynamicRoomList"></div>
                
                <div id="noRoomsMessage" style="display: none;">
                    <p>No rooms available at the moment. Why not create one?</p>
                </div>

                <div class="copyright-info">
                    <span class="brand">Talkomatic</span>
                    <span class="dot">•</span>
                    <span class="version">Open Source Edition</span>
                    <span class="dot">•</span>
                    <span class="creator">By <a href="https://x.com/mohdmahmodi" class="creator-link">Mohd Mahmodi</a></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Modal for the "Learn More" link (unchanged) -->
    <div id="roomInfoModal" class="modal">
        <div class="modal-content-info">
            <span class="close-modal">&times;</span>
            <h2>Creating a Room in Talkomatic</h2>
            
            <div class="modal-section">
                <h3>Room Types</h3>
                <div class="room-type-info">
                    <div class="type-item">
                        <img src="images/icons/public.svg" alt="Public Room Icon" class="info-icon">
                        <h4>Public Room</h4>
                        <p>Open to everyone. Visible in the room list and anyone can join instantly.</p>
                    </div>
                    
                    <div class="type-item">
                        <img src="images/icons/semi-private.svg" alt="Semi-Private Room Icon" class="info-icon">
                        <h4>Semi-Private Room</h4>
                        <p>Visible in the room list but requires creator approval to join.</p>
                    </div>
                    
                    <div class="type-item">
                        <img src="images/icons/secret.svg" alt="Private Room Icon" class="info-icon">
                        <h4>Private Room</h4>
                        <p>Hidden from the room list. Accessible only through direct invite link.</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-section">
                <h3>Room Layouts</h3>
                <div class="layout-info">
                    <div class="layout-item">
                        <img src="images/icons/horizontal.svg" alt="Horizontal Layout Icon" class="info-icon">
                        <h4>Horizontal Layout</h4>
                        <p>Chat windows are arranged in columns side by side. Automatically switches to vertical on smaller screens.</p>
                    </div>
                    
                    <div class="layout-item">
                        <img src="images/icons/vertical.svg" alt="Vertical Layout Icon" class="info-icon">
                        <h4>Vertical Layout</h4>
                        <p>Chat windows are stacked on top of each other. Best for mobile devices and narrow windows.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Modal for errors/info/etc. -->
    <div id="customModal" class="custom-modal">
      <div class="modal-content">
        <span class="close-modal-btn">&times;</span>
        <h3 id="modalTitle">Modal Title</h3>
        <p id="modalMessage">Modal message goes here.</p>
        
        <div id="modalInputContainer" style="display: none;">
          <input type="text" id="modalInput" maxlength="6" pattern="[0-9]*" inputmode="numeric">
          <p class="input-error" id="modalInputError"></p>
        </div>

        <div class="modal-buttons">
          <button id="modalCancelBtn" class="modal-btn">Cancel</button>
          <button id="modalConfirmBtn" class="modal-btn modal-confirm-btn">Confirm</button>
        </div>
      </div>
    </div>

    <!-- External scripts -->
    <script nonce="<%= nonce %>" src="js/jquery.min.js?v=1.0.1"></script>
    <script nonce="<%= nonce %>" src="js/toastr.min.js?v=1.0.1"></script>
    <script nonce="<%= nonce %>" src="js/lobby.js?v=1.0.5"></script>
    <script nonce="<%= nonce %>" src="/socket.io/socket.io.js?v=1.0.1"></script>
    <script nonce="<%= nonce %>" src="js/lobby-client.js?v=1.1.2"></script>

    <!-- *** APRIL FOOLS CHANGES *** Extra style snippet -->
    <style>
      /* Flip entire page upside down */
      .april-fools-upside-down {
        transform: rotate(360deg);
        transition: transform 1s ease;
      }
      
      /* Funny clown cursor */
      .april-fools-cursor {
        cursor: url("images/cursor-clown.png"), auto;
      }

      /* Psychedelic button hovers */
      .april-fools-crazy button:hover {
        animation: color-cycle 0.5s infinite;
      }
      @keyframes color-cycle {
        0%   { background-color: red; }
        25%  { background-color: yellow; }
        50%  { background-color: lime; }
        75%  { background-color: cyan; }
        100% { background-color: red; }
      }
    </style>
</body>
</html>
